{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Project LightReadingScraping\n",
    "\n",
    "## Code structure\n",
    "\n",
    "* 1) Imports\n",
    "* 2) Variable for range month and year\n",
    "* 3) Url for archive request\n",
    "* 4) List creation for stocking output\n",
    "* 5) for loop to ouput list(article_ai) of every lightreading month pages of every years\n",
    "* 6) sleep() function to bypass ban for to many request\n",
    "* 7) for loop to parse month pages and find links to individual articles\n",
    "* 8) for loop to extract data (author, date, text, title)\n",
    "* 9) cell for testing purposes\n",
    "* 10) creating dataframe\n",
    "\n",
    "\n",
    "## Problems with the actual code\n",
    "\n",
    "* Ban from Light reading\n",
    "    * Sleep might deal with this, tests are stil needed\n",
    "\n",
    "## Things to implement\n",
    "\n",
    "\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "from bs4 import BeautifulSoup\n",
    "import re\n",
    "import requests\n",
    "import pandas as pd\n",
    "from time import sleep\n",
    "from random import randint"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "month = range(1, 13)\n",
    "year = range(2016, 2022)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "url = 'https://www.lightreading.com/archives.asp?newsandviews=yes&tag_id=758&piddl_month={}&piddl_year={}'.format(month, year)\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "article_ai = []\n",
    "articles_author = []\n",
    "articles_date = []\n",
    "articles_text = []\n",
    "article_link = []\n",
    "article_final = []"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "for i in range(2016, 2022, 1):\n",
    "    for j in range(1, 13, 1): \n",
    "        if j < 8 and i == 2016:\n",
    "            continue\n",
    "        elif j > 2 and i == 2021:\n",
    "            continue\n",
    "        else:\n",
    "            url = 'https://www.lightreading.com/archives.asp?newsandviews=yes&tag_id=758&piddl_month={}&piddl_year={}'.format(j, i)\n",
    "            article_ai.append(url)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "        sleep(randint(5, 15))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "for i in article_ai:\n",
    "    \n",
    "    i = requests.get(i)\n",
    "    soup = BeautifulSoup(i.text, 'html.parser')\n",
    "    \n",
    "  \n",
    "#Temporarly\n",
    "    url = requests.get(\"https://www.lightreading.com/archives.asp?newsandviews=yes&tag_id=758&piddl_month=1&piddl_year=2021\")\n",
    "    soup = BeautifulSoup(url.text, 'html.parser')\n",
    "    article_link = []\n",
    "    article_final =[]\n",
    "#\n",
    "\n",
    "\n",
    "    for i in soup.find_all(\"div\", class_=(\"card-content\")):\n",
    "\n",
    "        j = i.a.get(\"href\")\n",
    "  \n",
    "        article_link.append(j)\n",
    "\n",
    "url_append = \"https://www.lightreading.com\"\n",
    "article_final = [url_append + sub for sub in article_link]\n",
    "    "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "for i in article_final:\n",
    "    i = requests.get(i)\n",
    "    soup = BeautifulSoup(i.text, 'html.parser')\n",
    "    \n",
    "    j = soup.find('span', class_='date')\n",
    "    articles_date.append(article_date)\n",
    "        \n",
    "    k = soup.find('span', class_='allcaps')\n",
    "    articles_author.append(k)\n",
    "    \n",
    "    l = soup.find('article'.p)\n",
    "    m = l.get_text()\n",
    "    articles_text.append(m)\n",
    "    \n",
    "    n = soup.find(class_='article-title')\n",
    "    articles_titles.append(n)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 52,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Rami Rahim, CEO of increasingly acquisitive Juniper Networks, sounded fairly satisfied on the company's earnings conference call with analysts  transcribed by Motley Fool  to discuss Q4 and full-year performance in 2020. \r\n",
      "\r\n",
      "\"We are exiting 2020 following two consecutive quarters of year-over-year growth, and entering the new year with good momentum,\" he said. \r\n",
      "\r\n",
      "The supplier generated net revenue of $1.22 billion for the quarter, up 1% year-on-year, with compared with analyst expectations of $1.19 billion. \r\n",
      "\r\n",
      "At the mid-point of guidance for Q1 2021, Juniper expects a year-on-year net revenue increase of 6%.\r\n",
      "\r\n",
      "Of that guidance  $1.05 billion, plus or minus $50 million  Juniper notes that less than $10 million will be from the recent acquisitions of Apstra, 128 Technology and Netrounds. \n",
      "Play Mist for me\r\n",
      "\r\n",
      "Rahim is hopeful that this trio investments will eventually deliver \"similar returns on investment\" to what Juniper is seeing with Mist Systems, which \"continues to exceed expectations.\" Juniper acquired Mist, which provides AI-powered analytics to enterprises, for $405 million last March. \r\n",
      "\r\n",
      "\r\n",
      "Helped along by what Rahim called \"Mist AI differentiation,\" Juniper's \"enterprise\" vertical grew 7% in Q4, year-on-year, to $467 million. It was Juniper's best performing business segment by far. \r\n",
      "\r\n",
      "\"While we saw particularly strong [enterprise] demand in the North American market, strength was broad-based across geographies,\" added Rahim. \r\n",
      "\r\n",
      "Q4 net revenue at Juniper's cloud business was flat at $280.7 million, although Rahim expects growth this year. \"Importantly, we are continuing to make progress on 400G and currently have more than 100 wins for our 400G capable products,\" he said.   \n",
      "Steadying the service provider ship\r\n",
      "Juniper's once highly troubled \"service provider\" vertical is still not contributing to the modest advances made in overall net revenue, but neither is it such a drag on performance as it used to be. \r\n",
      "Q4 net revenue at the service provider business fell by a modest 3.6%, year-on-year, to $474.9 million. This, claimed Rahim, \"exceeded our expectations.\" \n",
      "\n",
      "Want to know more about 5G? Check out our dedicated 5G content channel here on Light Reading.  \n",
      "\n",
      "He explained that these \"improved service provider results,\" both for Q4 and full-year 2020, were \"due in large part to the deliberate diversification efforts we have undertaken, which [enabled us] to overcome week spending trends at several of our large US Tier 1 customers.\" \r\n",
      "\r\n",
      "The CEO reckoned that the \"strength\" seen at US cable operators and international carriers was  likely to continue through 2021. Moreover, Rahim was optimistic that Juniper could capture more switching and security opportunities within the service provider vertical, in addition to core and edge routing deployments. \n",
      "Keep the Apstra flying\r\n",
      "\r\n",
      "A day prior to presenting its Q4 results, Juniper finalized the acquisition of Apstra, which plays in the intent-based networking and automated closed-loop assurance space. \r\n",
      "\r\n",
      "The Apstra team is now part of Juniper's data center business, while Apstra CEO and co-founder, David Cheriton, joins Juniper as chief data center scientist. \r\n",
      "\r\n",
      "\"Apstra has the potential to accelerate our success in the data center switching market, both within cloud majors and large enterprise accounts,\" remarked Rahim. \n",
      " Ken Wieland, contributing editor, special to Light Reading\n"
     ]
    }
   ],
   "source": [
    "url = requests.get(\"https://www.lightreading.com/opticalip/routing/juniper-q4-gets-boost-from-enterprise-biz/d/d-id/767024\")\n",
    "article_text = []\n",
    "soup = BeautifulSoup(url.text, 'html.parser')\n",
    "\n",
    "texte_brut = soup.find(\"article\")\n",
    "text_only = texte_brut.get_text()\n",
    "print(text_only)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "article_data = pd.DataFrame({\n",
    "'author': articles_author,\n",
    "'date': atricles_date,\n",
    "'text': articles_text,\n",
    "'title': articles_title,\n",
    "'link': articles_final,\n",
    "})"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
